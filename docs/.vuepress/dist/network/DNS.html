<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DNS | 学习笔记</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="xcc的备忘笔记">
    <link rel="preload" href="/assets/css/0.styles.abfd12c2.css" as="style"><link rel="preload" href="/assets/js/app.bd3a774d.js" as="script"><link rel="preload" href="/assets/js/2.591daaf2.js" as="script"><link rel="preload" href="/assets/js/29.a3f2fcef.js" as="script"><link rel="prefetch" href="/assets/js/10.3cb190c7.js"><link rel="prefetch" href="/assets/js/11.97d19dd3.js"><link rel="prefetch" href="/assets/js/12.807525a5.js"><link rel="prefetch" href="/assets/js/13.568dcd97.js"><link rel="prefetch" href="/assets/js/14.f361b042.js"><link rel="prefetch" href="/assets/js/15.fa8dcc41.js"><link rel="prefetch" href="/assets/js/16.d66bb3a4.js"><link rel="prefetch" href="/assets/js/17.c78ff984.js"><link rel="prefetch" href="/assets/js/18.31a74e1e.js"><link rel="prefetch" href="/assets/js/19.f99ab3fa.js"><link rel="prefetch" href="/assets/js/20.2cf38dce.js"><link rel="prefetch" href="/assets/js/21.afa2a950.js"><link rel="prefetch" href="/assets/js/22.ea1f3d58.js"><link rel="prefetch" href="/assets/js/23.1db48f7d.js"><link rel="prefetch" href="/assets/js/24.e82ba836.js"><link rel="prefetch" href="/assets/js/25.19af2c64.js"><link rel="prefetch" href="/assets/js/26.5b4e9966.js"><link rel="prefetch" href="/assets/js/27.ada649c4.js"><link rel="prefetch" href="/assets/js/28.81d1b5f0.js"><link rel="prefetch" href="/assets/js/3.05ec25a4.js"><link rel="prefetch" href="/assets/js/30.5b460bc7.js"><link rel="prefetch" href="/assets/js/31.51a84dc3.js"><link rel="prefetch" href="/assets/js/32.a823fa56.js"><link rel="prefetch" href="/assets/js/33.0a9df6f4.js"><link rel="prefetch" href="/assets/js/34.d19a0778.js"><link rel="prefetch" href="/assets/js/35.e4573d08.js"><link rel="prefetch" href="/assets/js/36.de6e2c3e.js"><link rel="prefetch" href="/assets/js/37.2487197e.js"><link rel="prefetch" href="/assets/js/38.120497d7.js"><link rel="prefetch" href="/assets/js/4.3b6a7e49.js"><link rel="prefetch" href="/assets/js/5.bc6e1aa4.js"><link rel="prefetch" href="/assets/js/6.29dc4fad.js"><link rel="prefetch" href="/assets/js/7.ea924bc2.js"><link rel="prefetch" href="/assets/js/8.ccecbc63.js"><link rel="prefetch" href="/assets/js/9.e583fadd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.abfd12c2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/front/" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="https://github.com/2xxxx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/front/" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="https://github.com/2xxxx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>网络基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/network/" aria-current="page" class="sidebar-link">网络基础</a></li><li><a href="/network/OSI.html" class="sidebar-link">OSI七层模型</a></li><li><a href="/network/DNS.html" aria-current="page" class="active sidebar-link">DNS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/network/DNS.html#dns查询" class="sidebar-link">DNS查询</a></li><li class="sidebar-sub-header"><a href="/network/DNS.html#dns缓存" class="sidebar-link">DNS缓存</a></li></ul></li><li><a href="/network/TCPandUDP.html" class="sidebar-link">TCP 和 UDP</a></li><li><a href="/network/http.html" class="sidebar-link">http协议</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目和业务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>html和css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编程</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dns"><a href="#dns" class="header-anchor">#</a> DNS</h1> <p>DNS(Domain Name System)域名解析系统，具体功能为将我们输入的域名解析成对应的IP地址，客户端收到地址后进行TCP连接。</p> <h2 id="dns查询"><a href="#dns查询" class="header-anchor">#</a> DNS查询</h2> <p>查询的方法主要有两种，一种是<strong>递归查询</strong>，一种是<strong>迭代查询</strong>。递归查询是查询本地DNS服务器的过程，先查浏览器后查操作系统，查看是否有本地缓存；迭代查询是指本地DNS服务器在互联网上查询的过程。默认递归查询，递归查不到再进行迭代查询。</p> <p>查询过程:</p> <ol><li>用户输入域名后，客户端发送DNS请求给本地DNS服务器(电信、移动提供)，本地DNS服务器会查询自身缓存有没有记录，有则返回结果，没有则向DNS根服务器查询。</li> <li><code>DNS根服务器</code>会根据域名告诉本地DNS服务器到域服务器继续查询，并给出域服务器的地址，<code>域服务器</code>收到请求后会告诉本地DNS服务器访问域名的解析服务器的地址,
本地DNS服务器向域名的<code>解析服务器</code>发送请求，得到域名和IP的对应关系，将IP地址返回给客户端访问，并将对应关系存储在缓存中。</li></ol> <p>以百度为例，域名为www.baidu.com,这是我们平时看到的，实际域名是www.baidu.com.root,其中，.root是根域名，因为所有域名的根域名都一样，所以平时省略。<br>
域名层次结构为：<code>主机名(www.baidu.com) 次级域名(baidu.com) 顶级域名(com) 根域名(root)</code>。查询的时候是分级查询，从根域名开始一层层查询：<code>.root -&gt; .com.root -&gt; .baidu.com.root -&gt; www.baidu.com.root</code>,最后获取到域名对应的IP(可能有多个)，<strong>一个域名可以解析为多个IP地址</strong>，大型网站的服务器都有均衡负载策略，由该策略决定最终访问哪台服务器； <strong>一个IP地址也能对应多个域名</strong>，一台服务器可托管多个网站，主机根据客户端请求的域名与自身配置的域名，转发给不同程序处理。</p> <p>扩展：dns负载均衡<br>
一个域名访问多个IP地址。当客户端请求解析域名时，DNS服务器查询文件中的记录按顺序返回不同的解析结果，从而将客户访问引导到不同的服务器上去，从而实现负载均衡。</p> <h2 id="dns缓存"><a href="#dns缓存" class="header-anchor">#</a> DNS缓存</h2> <p>目的：提高域名查询效率。<br>
在访问网站得到IP后，会将域名及IP存入浏览器缓存中，在下次查询时先在缓存中查询。<br>
DNS缓存分为<strong>浏览器缓存</strong>和<strong>OS缓存</strong></p> <p>浏览器的DNS缓存过期时间与TTL无关，而是由浏览器配置决定，谷歌与火狐默认过期时间为一分钟。</p> <p>os缓存会参考服务器返回的TTL时间，Windows默认开启DNS缓存，会缓存一些常见域名。<br>
扩展：<br>
TTL(Time To Live,域名缓存最长时间)，默认为10分钟，最大可设置24小时，超过时间后，本地DNS服务器就会删除该缓存，下次查询时就要进行迭代查询。<br>
os缓存命令：</p> <ul><li>查看：ipconfig/displaydns</li> <li>清空： ipconfig/flushdns</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/2/2020, 4:17:53 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/network/OSI.html" class="prev">
        OSI七层模型
      </a></span> <span class="next"><a href="/network/TCPandUDP.html">
        TCP 和 UDP
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bd3a774d.js" defer></script><script src="/assets/js/2.591daaf2.js" defer></script><script src="/assets/js/29.a3f2fcef.js" defer></script>
  </body>
</html>

(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{357:function(v,_,t){"use strict";t.r(_);var e=t(42),i=Object(e.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"浏览器渲染"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器渲染"}},[v._v("#")]),v._v(" 浏览器渲染")]),v._v(" "),t("p",[v._v("浏览器渲染主要分为4步：")]),v._v(" "),t("ol",[t("li",[v._v("将html代码解析成DOM树(包括display为none的节点)，将css代码解析成CSSOM(不包含display为none的节点)；")]),v._v(" "),t("li",[v._v("将DOM tree与CSSOM相结合生成render tree(不包含display为none的节点);")]),v._v(" "),t("li",[v._v("根据视口信息计算出render tree中节点的位置大小的实际像素值;")]),v._v(" "),t("li",[v._v("将render tree的实际像素值发送给GPU,渲染到页面上。")])]),v._v(" "),t("p",[v._v("浏览器器渲染中主要会触发两个事件："),t("code",[v._v("回流")]),v._v("和"),t("code",[v._v("重绘")])]),v._v(" "),t("h2",{attrs:{id:"回流"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#回流"}},[v._v("#")]),v._v(" 回流")]),v._v(" "),t("p",[v._v("回流又叫做重排。一般会触发回流的条件有：")]),v._v(" "),t("ol",[t("li",[v._v("页面初次渲染")]),v._v(" "),t("li",[v._v("页面中增加或者删除可见节点 (js,display:none)")]),v._v(" "),t("li",[v._v("节点的尺寸发生改变(盒子模型中的属性)")]),v._v(" "),t("li",[v._v("节点的位置变化")]),v._v(" "),t("li",[v._v("文本的变化或者是图片尺寸变化")]),v._v(" "),t("li",[v._v("窗口大小变化(因为视口的大小会影响到实际像素值)"),t("br"),v._v("\nps:浏览器本身有做回流优化，将对DOM的修改放到一个队列里，通过"),t("strong",[v._v("队列机制来批量更新布局")]),v._v("，当达到一定阈值或是一段时间(至少一个浏览器刷新16.6ms)后才会清空队列触发回流，但是当用户获取窗口等布局信息时，会立即执行回流，因为队列中可能会有影响这些属性或方法返回值的操作，即使没有，浏览器也会强制清空队列，触发回流和重绘来确保返回正确的值。")])]),v._v(" "),t("h2",{attrs:{id:"重绘"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重绘"}},[v._v("#")]),v._v(" 重绘")]),v._v(" "),t("p",[v._v("触发重绘的条件有：")]),v._v(" "),t("ol",[t("li",[v._v("回流。回流一定会触发重绘，重绘不一定触发回流。")]),v._v(" "),t("li",[v._v("改变某个元素的颜色")]),v._v(" "),t("li",[v._v("改变节点可见性，节点还在渲染树中(visibility:hidden,opacity等)")])]),v._v(" "),t("h2",{attrs:{id:"渲染优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#渲染优化"}},[v._v("#")]),v._v(" 渲染优化")]),v._v(" "),t("p",[t("strong",[v._v("避免回流和重绘")]),v._v("\n具体方法：\n"),t("strong",[v._v("CSS")])]),v._v(" "),t("ol",[t("li",[v._v("使用visibility替代display:none,因为前者只会引起重绘，后者会引起回流")]),v._v(" "),t("li",[v._v("避免使用table布局，很小的改动都可能造成整个table重新布局")]),v._v(" "),t("li",[v._v("CSS3硬件加速(不了解)")]),v._v(" "),t("li",[v._v("避免设置多层内联样式，CSS选择符会从右往左匹配查找，避免节点层级过多")])]),v._v(" "),t("p",[t("strong",[v._v("JS")])]),v._v(" "),t("ol",[t("li",[v._v("避免频繁获取布局信息(可用变量保存)")]),v._v(" "),t("li",[v._v("需要频繁修改的节点，给其设置绝对定位，脱离文档流，可以避免父元素及其后续元素频繁回流")]),v._v(" "),t("li",[v._v("js中改变元素多个样式时，可用class或者cssText同时设置多个属性")]),v._v(" "),t("li",[v._v("一次添加多个节点时，可以使用document fragment创建空白片段来添加节点，\n之后将片段拷贝进文档中")])]),v._v(" "),t("p",[v._v("扩展："),t("br"),v._v("\n布局信息包括：")]),v._v(" "),t("ul",[t("li",[v._v("offsetTop、offsetLeft、offsetWidth、offsetHeight")]),v._v(" "),t("li",[v._v("scrollTop、scrollLeft、scrollWidth、scrollHeight")]),v._v(" "),t("li",[v._v("clientTop、clientLeft、clientWidth、clientHeight")]),v._v(" "),t("li",[v._v("width、height")]),v._v(" "),t("li",[v._v("getComputedStyle()、getBoundingClientRect()")])]),v._v(" "),t("p",[v._v("position为absolute或fixed的元素不参与flex的布局，可能会导致部分移动端布局错位"),t("br"),v._v("\n解决方法：在设置绝对定位的元素上再设置width:100%;")])])}),[],!1,null,null,null);_.default=i.exports}}]);
# Event Loop
Event loop(事件循环)是javaScript的一种运行机制。要了解这个的话，得先对进程和线程有个理解。  

## 进程和线程  
**进程**： CPU分配资源的最小单位。  
**线程**： CPU调度的最小单位。  
一个进程可以有多个线程。浏览器是多进程的，每一个tab页都是一个进程，进程与进程直接是不影响的，所以当一个网页崩溃后，其他网页还是可以正常运行。  

js是同步，单线程的  

js为什么是单线程的呢？  
因为js主要是实现用户和浏览器交互以及操作dom，如果js是多线程，就会造成复杂的同步问题。虽然html5新出了Web Worker允许js创建多个子线程，但是这些子线程还是受控于主线程，且子线程无法直接操作dom。  

## 任务队列
因为js是单线程，所以事件是需要排队处理，前一个任务结束才会执行后一个任务，假如前一个任务耗时很长，后一个任务就需要一直等着，为了解决这方面的问题，就使用了Event Loop(事件循环)。很多输出打印的面试题也是考的这一知识点。  

任务主要分为两种，**同步任务**和**异步任务**。  

由于js是单线程的，如果所有任务按排队顺序执行，那么异步任务会阻塞后续的同步任务，影响执行效率，所以js执行时会有**执行栈**和**任务队列**两个概念：  
所有的同步任务都在主线程中执行，会形成一个执行栈，任务队列是在主线程外，只要异步任务有了运行结果，就将回调事件放置到任务队列中。当执行栈中的任务执行完就将任务队列中的第一位任务添加进执行栈中  

任务队列中包含两个重要的概念：**宏任务**和**微任务**。  
|         |宏任务      |微任务      |
|----------|-----------|-----------|
|范围     |setTimeout、setInterval、鼠标事件等 | Promise的回调等|
|优先级    |低         |高(优先执行) |

特性:  
1. 宏任务会按顺序执行，所以定时器的任务也是需要等前一个任务执行后才执行，而不是设置时间
一到就立马执行，而且定时器的执行流程是等定时时间一到，从定时器模块移入到宏任务队列。  
